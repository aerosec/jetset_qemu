
#include "qemu/osdep.h"
#include "hw/qdev.h"
#include "qapi/error.h"
#include "hw/sysbus.h"
#include "hw/i386/pc.h"
#include <unistd.h>

#define TYPE_SYNTH "synth_rpi_concrete"
#define SYNTH(obj) OBJECT_CHECK(SynthState, (obj), TYPE_SYNTH)
#define ARM_IRQS 8
#define BCM2835_IC_ARM_IRQ "arm-irq"


typedef struct {
    SysBusDevice parent_obj;
    qemu_irq* irq_set;
    int global_idx;


    MemoryRegion io_dma;

    MemoryRegion io_ic;
 qemu_irq ic_irq_0[8];
 qemu_irq ic_irq_1;

    MemoryRegion io_mbox;

    uint64_t io_read_trace_mbox_0x3f00ba20[3];

    MemoryRegion io_rng;

    MemoryRegion io_gpio;

    uint64_t io_read_trace_gpio_0x3f200040[3];

    uint64_t io_read_trace_gpio_0x3f200044[3];

    uint64_t io_read_trace_gpio_0x3f200010[10];

    uint64_t io_read_trace_gpio_0x3f200014[14];

    uint64_t io_read_trace_gpio_0x3f200038[5];

    uint64_t io_read_trace_gpio_0x3f20000c[5];

    MemoryRegion io_pl011;

    uint64_t io_read_trace_pl011_0x3f201030[992];

    uint64_t io_read_trace_pl011_0x3f201018[106];

    uint64_t io_read_trace_pl011_0x3f201038[3];

    uint64_t io_read_trace_pl011_0x3f201000[34];

    MemoryRegion io_mmc;

    uint64_t io_read_trace_mmc_0x3f202034[6];

    uint64_t io_read_trace_mmc_0x3f202000[21];

    uint64_t io_read_trace_mmc_0x3f202020[4];

    uint64_t io_read_trace_mmc_0x3f202010[4];

    MemoryRegion io_i2c;

    MemoryRegion io_aux;

    uint64_t io_read_trace_aux_0x3f215004[8];

    MemoryRegion io_sdhci;

    MemoryRegion io_dma_chan15;

    MemoryRegion io_soc_control;
 qemu_irq soc_control_irq_0;
 qemu_irq soc_control_irq_1;
 qemu_irq soc_control_irq_2;

    uint32_t irq_reg2;
 uint32_t ic_trigger_0; 
 uint32_t soc_control_trigger_0; 
 uint32_t soc_control_trigger_1; 
} SynthState;


static void ic_irq_0(void *opaque, int irq, int level)
{
    SynthState* s = opaque;
    qemu_set_irq(s->ic_irq_1, level);
}

static uint8_t ic_pending_intr = 0;
static int next_ic_pending_intr(void)
{
  ic_pending_intr++;
  if(ic_pending_intr > 16) {
    ic_pending_intr = 0;
    return 0;
  }
  return 1 << ic_pending_intr;
}

static uint8_t soc_control_pending_intr = 0;
static int next_soc_control_pending_intr(void)
{
  soc_control_pending_intr++;
  if(soc_control_pending_intr > 16) {
    soc_control_pending_intr = 0;
    return 0;
  }
  return 1 << soc_control_pending_intr;
}

/* Update interrupts.  */
static void synth_soc_control_update(SynthState *s)
{
    s->irq_reg2 = 0;

    if (s->soc_control_trigger_0 && soc_control_pending_intr == 0) {
        soc_control_pending_intr = 1;
    }

    if(s->soc_control_trigger_1 != 0){
        s->irq_reg2 |= (uint32_t)1 << 3;
    }

    qemu_set_irq(s->soc_control_irq_2, (s->irq_reg2 != 0) || (soc_control_pending_intr != 0));
}

static void soc_control_irq_0(void *opaque, int irq, int level)
{
    SynthState *s = opaque;
    s->soc_control_trigger_0 = level;
    synth_soc_control_update(s);
}

static void soc_control_irq_1(void *opaque, int irq, int level)
{
    SynthState *s = opaque;
    s->soc_control_trigger_1 = level;
    synth_soc_control_update(s);
}


static void synth_write_dma(
    void *opaque, hwaddr addr, uint64_t val, unsigned size)
{
        printf("\%c" ,(char)val);
        fflush(stdout);
}

static uint64_t synth_read_dma(void *opaque, hwaddr addr, unsigned size) {
    return 0xffffffff;
}

static const MemoryRegionOps synth_io_ops_dma =
{
    .write = synth_write_dma,
    .read = synth_read_dma,
    .valid.min_access_size = 1,
    .valid.max_access_size = 4,
    .endianness = DEVICE_NATIVE_ENDIAN,
};

static void synth_write_ic(
    void *opaque, hwaddr addr, uint64_t val, unsigned size)
{
        printf("\%c" ,(char)val);
        fflush(stdout);
}

static uint64_t synth_read_ic(void *opaque, hwaddr addr, unsigned size) {
    uint32_t v = next_ic_pending_intr();
    return v;
}

static const MemoryRegionOps synth_io_ops_ic =
{
    .write = synth_write_ic,
    .read = synth_read_ic,
    .valid.min_access_size = 1,
    .valid.max_access_size = 4,
    .endianness = DEVICE_NATIVE_ENDIAN,
};

static void synth_write_mbox(
    void *opaque, hwaddr addr, uint64_t val, unsigned size)
{
        printf("\%c" ,(char)val);
        fflush(stdout);
}

static uint64_t synth_read_mbox(void *opaque, hwaddr addr, unsigned size) {
    SynthState * sio = opaque;
    switch(addr) {
        
case 0x3f00ba20 - 0x3f00b800:
    if (sio->io_read_trace_mbox_0x3f00ba20[1] < sio->io_read_trace_mbox_0x3f00ba20[0]) {
        sio->io_read_trace_mbox_0x3f00ba20[1]++;
    }
    return sio->io_read_trace_mbox_0x3f00ba20[sio->io_read_trace_mbox_0x3f00ba20[1] + 1];

        default:
            return 0xffffffff;
    }
}

static const MemoryRegionOps synth_io_ops_mbox =
{
    .write = synth_write_mbox,
    .read = synth_read_mbox,
    .valid.min_access_size = 1,
    .valid.max_access_size = 4,
    .endianness = DEVICE_NATIVE_ENDIAN,
};

static void synth_write_rng(
    void *opaque, hwaddr addr, uint64_t val, unsigned size)
{
        printf("\%c" ,(char)val);
        fflush(stdout);
}

static uint64_t synth_read_rng(void *opaque, hwaddr addr, unsigned size) {
    return 0xffffffff;
}

static const MemoryRegionOps synth_io_ops_rng =
{
    .write = synth_write_rng,
    .read = synth_read_rng,
    .valid.min_access_size = 1,
    .valid.max_access_size = 4,
    .endianness = DEVICE_NATIVE_ENDIAN,
};

static void synth_write_gpio(
    void *opaque, hwaddr addr, uint64_t val, unsigned size)
{
        printf("\%c" ,(char)val);
        fflush(stdout);
}

static uint64_t synth_read_gpio(void *opaque, hwaddr addr, unsigned size) {
    SynthState * sio = opaque;
    switch(addr) {
        
case 0x3f200040 - 0x3f200000:
    if (sio->io_read_trace_gpio_0x3f200040[1] < sio->io_read_trace_gpio_0x3f200040[0]) {
        sio->io_read_trace_gpio_0x3f200040[1]++;
    }
    return sio->io_read_trace_gpio_0x3f200040[sio->io_read_trace_gpio_0x3f200040[1] + 1];


case 0x3f200044 - 0x3f200000:
    if (sio->io_read_trace_gpio_0x3f200044[1] < sio->io_read_trace_gpio_0x3f200044[0]) {
        sio->io_read_trace_gpio_0x3f200044[1]++;
    }
    return sio->io_read_trace_gpio_0x3f200044[sio->io_read_trace_gpio_0x3f200044[1] + 1];


case 0x3f200010 - 0x3f200000:
    if (sio->io_read_trace_gpio_0x3f200010[1] < sio->io_read_trace_gpio_0x3f200010[0]) {
        sio->io_read_trace_gpio_0x3f200010[1]++;
    }
    return sio->io_read_trace_gpio_0x3f200010[sio->io_read_trace_gpio_0x3f200010[1] + 1];


case 0x3f200014 - 0x3f200000:
    if (sio->io_read_trace_gpio_0x3f200014[1] < sio->io_read_trace_gpio_0x3f200014[0]) {
        sio->io_read_trace_gpio_0x3f200014[1]++;
    }
    return sio->io_read_trace_gpio_0x3f200014[sio->io_read_trace_gpio_0x3f200014[1] + 1];


case 0x3f200038 - 0x3f200000:
    if (sio->io_read_trace_gpio_0x3f200038[1] < sio->io_read_trace_gpio_0x3f200038[0]) {
        sio->io_read_trace_gpio_0x3f200038[1]++;
    }
    return sio->io_read_trace_gpio_0x3f200038[sio->io_read_trace_gpio_0x3f200038[1] + 1];


case 0x3f20000c - 0x3f200000:
    if (sio->io_read_trace_gpio_0x3f20000c[1] < sio->io_read_trace_gpio_0x3f20000c[0]) {
        sio->io_read_trace_gpio_0x3f20000c[1]++;
    }
    return sio->io_read_trace_gpio_0x3f20000c[sio->io_read_trace_gpio_0x3f20000c[1] + 1];

        default:
            return 0xffffffff;
    }
}

static const MemoryRegionOps synth_io_ops_gpio =
{
    .write = synth_write_gpio,
    .read = synth_read_gpio,
    .valid.min_access_size = 1,
    .valid.max_access_size = 4,
    .endianness = DEVICE_NATIVE_ENDIAN,
};

static void synth_write_pl011(
    void *opaque, hwaddr addr, uint64_t val, unsigned size)
{
        printf("\%c" ,(char)val);
        fflush(stdout);
}

//static int num_recorded_reads_pl011 = 1127;
static uint64_t synth_read_pl011(void *opaque, hwaddr addr, unsigned size) {
    SynthState * sio = opaque;
    switch(addr) {
        
case 0x3f201030 - 0x3f201000:
    if (sio->io_read_trace_pl011_0x3f201030[1] < sio->io_read_trace_pl011_0x3f201030[0]) {
        sio->io_read_trace_pl011_0x3f201030[1]++;
    }
    return sio->io_read_trace_pl011_0x3f201030[sio->io_read_trace_pl011_0x3f201030[1] + 1];


case 0x3f201018 - 0x3f201000:
    if (sio->io_read_trace_pl011_0x3f201018[1] < sio->io_read_trace_pl011_0x3f201018[0]) {
        sio->io_read_trace_pl011_0x3f201018[1]++;
    }
    return sio->io_read_trace_pl011_0x3f201018[sio->io_read_trace_pl011_0x3f201018[1] + 1];


case 0x3f201038 - 0x3f201000:
    if (sio->io_read_trace_pl011_0x3f201038[1] < sio->io_read_trace_pl011_0x3f201038[0]) {
        sio->io_read_trace_pl011_0x3f201038[1]++;
    }
    return sio->io_read_trace_pl011_0x3f201038[sio->io_read_trace_pl011_0x3f201038[1] + 1];


case 0x3f201000 - 0x3f201000:
    if (sio->io_read_trace_pl011_0x3f201000[1] < sio->io_read_trace_pl011_0x3f201000[0]) {
        sio->io_read_trace_pl011_0x3f201000[1]++;
    }
    return sio->io_read_trace_pl011_0x3f201000[sio->io_read_trace_pl011_0x3f201000[1] + 1];

        default:
            return 0xffffffff;
    }
}

static const MemoryRegionOps synth_io_ops_pl011 =
{
    .write = synth_write_pl011,
    .read = synth_read_pl011,
    .valid.min_access_size = 1,
    .valid.max_access_size = 4,
    .endianness = DEVICE_NATIVE_ENDIAN,
};

static void synth_write_mmc(
    void *opaque, hwaddr addr, uint64_t val, unsigned size)
{
        printf("\%c" ,(char)val);
        fflush(stdout);
}

static uint64_t synth_read_mmc(void *opaque, hwaddr addr, unsigned size) {
    SynthState * sio = opaque;
    switch(addr) {
        
case 0x3f202034 - 0x3f202000:
    if (sio->io_read_trace_mmc_0x3f202034[1] < sio->io_read_trace_mmc_0x3f202034[0]) {
        sio->io_read_trace_mmc_0x3f202034[1]++;
    }
    return sio->io_read_trace_mmc_0x3f202034[sio->io_read_trace_mmc_0x3f202034[1] + 1];


case 0x3f202000 - 0x3f202000:
    if (sio->io_read_trace_mmc_0x3f202000[1] < sio->io_read_trace_mmc_0x3f202000[0]) {
        sio->io_read_trace_mmc_0x3f202000[1]++;
    }
    return sio->io_read_trace_mmc_0x3f202000[sio->io_read_trace_mmc_0x3f202000[1] + 1];


case 0x3f202020 - 0x3f202000:
    if (sio->io_read_trace_mmc_0x3f202020[1] < sio->io_read_trace_mmc_0x3f202020[0]) {
        sio->io_read_trace_mmc_0x3f202020[1]++;
    }
    return sio->io_read_trace_mmc_0x3f202020[sio->io_read_trace_mmc_0x3f202020[1] + 1];


case 0x3f202010 - 0x3f202000:
    if (sio->io_read_trace_mmc_0x3f202010[1] < sio->io_read_trace_mmc_0x3f202010[0]) {
        sio->io_read_trace_mmc_0x3f202010[1]++;
    }
    return sio->io_read_trace_mmc_0x3f202010[sio->io_read_trace_mmc_0x3f202010[1] + 1];

        default:
            return 0xffffffff;
    }
}

static const MemoryRegionOps synth_io_ops_mmc =
{
    .write = synth_write_mmc,
    .read = synth_read_mmc,
    .valid.min_access_size = 1,
    .valid.max_access_size = 4,
    .endianness = DEVICE_NATIVE_ENDIAN,
};

static void synth_write_i2c(
    void *opaque, hwaddr addr, uint64_t val, unsigned size)
{
        printf("\%c" ,(char)val);
        fflush(stdout);
}

static uint64_t synth_read_i2c(void *opaque, hwaddr addr, unsigned size) {
    return 0xffffffff;
}

static const MemoryRegionOps synth_io_ops_i2c =
{
    .write = synth_write_i2c,
    .read = synth_read_i2c,
    .valid.min_access_size = 1,
    .valid.max_access_size = 4,
    .endianness = DEVICE_NATIVE_ENDIAN,
};

static void synth_write_aux(
    void *opaque, hwaddr addr, uint64_t val, unsigned size)
{
        printf("\%c" ,(char)val);
        fflush(stdout);
}

static uint64_t synth_read_aux(void *opaque, hwaddr addr, unsigned size) {
    SynthState * sio = opaque;
    switch(addr) {
        
case 0x3f215004 - 0x3f215000:
    if (sio->io_read_trace_aux_0x3f215004[1] < sio->io_read_trace_aux_0x3f215004[0]) {
        sio->io_read_trace_aux_0x3f215004[1]++;
    }
    return sio->io_read_trace_aux_0x3f215004[sio->io_read_trace_aux_0x3f215004[1] + 1];

        default:
            return 0xffffffff;
    }
}

static const MemoryRegionOps synth_io_ops_aux =
{
    .write = synth_write_aux,
    .read = synth_read_aux,
    .valid.min_access_size = 1,
    .valid.max_access_size = 4,
    .endianness = DEVICE_NATIVE_ENDIAN,
};

static void synth_write_sdhci(
    void *opaque, hwaddr addr, uint64_t val, unsigned size)
{
        printf("\%c" ,(char)val);
        fflush(stdout);
}

static uint64_t synth_read_sdhci(void *opaque, hwaddr addr, unsigned size) {
    return 0xffffffff;
}

static const MemoryRegionOps synth_io_ops_sdhci =
{
    .write = synth_write_sdhci,
    .read = synth_read_sdhci,
    .valid.min_access_size = 1,
    .valid.max_access_size = 4,
    .endianness = DEVICE_NATIVE_ENDIAN,
};

static void synth_write_dma_chan15(
    void *opaque, hwaddr addr, uint64_t val, unsigned size)
{
        printf("\%c" ,(char)val);
        fflush(stdout);
}

static uint64_t synth_read_dma_chan15(void *opaque, hwaddr addr, unsigned size) {
    return 0xffffffff;
}

static const MemoryRegionOps synth_io_ops_dma_chan15 =
{
    .write = synth_write_dma_chan15,
    .read = synth_read_dma_chan15,
    .valid.min_access_size = 1,
    .valid.max_access_size = 4,
    .endianness = DEVICE_NATIVE_ENDIAN,
};

static void synth_write_soc_control(
    void *opaque, hwaddr addr, uint64_t val, unsigned size)
{
        printf("\%c" ,(char)val);
        fflush(stdout);
}

static uint64_t synth_read_soc_control(void *opaque, hwaddr addr, unsigned size)
{
    SynthState *s = opaque;
    uint32_t v = s->irq_reg2;
    if(soc_control_pending_intr)
        v = next_soc_control_pending_intr();
    return v;
}

static const MemoryRegionOps synth_io_ops_soc_control =
{
    .write = synth_write_soc_control,
    .read = synth_read_soc_control,
    .valid.min_access_size = 1,
    .valid.max_access_size = 4,
    .endianness = DEVICE_NATIVE_ENDIAN,
};

static void synth_init(Object *d){}

static void synth_realize(DeviceState *d, Error **errp)
{
    SysBusDevice *dev = SYS_BUS_DEVICE(d);
    SynthState *sio = SYNTH(d);
    Object *obj = OBJECT(sio);
    MemoryRegion *sysbus = sysbus_address_space(dev);
    
    memory_region_init_io(
        &sio->io_dma, obj, &synth_io_ops_dma, sio, TYPE_SYNTH, 0x1000
    );
    sysbus_init_mmio(dev, &sio->io_dma);
    memory_region_add_subregion(sysbus, 0x3f007000, &sio->io_dma);

    memory_region_init_io(
        &sio->io_ic, obj, &synth_io_ops_ic, sio, TYPE_SYNTH, 0x200
    );
    sysbus_init_mmio(dev, &sio->io_ic);
    memory_region_add_subregion(sysbus, 0x3f00b200, &sio->io_ic);

    memory_region_init_io(
        &sio->io_mbox, obj, &synth_io_ops_mbox, sio, TYPE_SYNTH, 0x400
    );
    sysbus_init_mmio(dev, &sio->io_mbox);
    memory_region_add_subregion(sysbus, 0x3f00b800, &sio->io_mbox);

    memory_region_init_io(
        &sio->io_rng, obj, &synth_io_ops_rng, sio, TYPE_SYNTH, 0x10
    );
    sysbus_init_mmio(dev, &sio->io_rng);
    memory_region_add_subregion(sysbus, 0x3f104000, &sio->io_rng);

    memory_region_init_io(
        &sio->io_gpio, obj, &synth_io_ops_gpio, sio, TYPE_SYNTH, 0x1000
    );
    sysbus_init_mmio(dev, &sio->io_gpio);
    memory_region_add_subregion(sysbus, 0x3f200000, &sio->io_gpio);

    memory_region_init_io(
        &sio->io_pl011, obj, &synth_io_ops_pl011, sio, TYPE_SYNTH, 0x1000
    );
    sysbus_init_mmio(dev, &sio->io_pl011);
    memory_region_add_subregion(sysbus, 0x3f201000, &sio->io_pl011);

    memory_region_init_io(
        &sio->io_mmc, obj, &synth_io_ops_mmc, sio, TYPE_SYNTH, 0x1000
    );
    sysbus_init_mmio(dev, &sio->io_mmc);
    memory_region_add_subregion(sysbus, 0x3f202000, &sio->io_mmc);

    memory_region_init_io(
        &sio->io_i2c, obj, &synth_io_ops_i2c, sio, TYPE_SYNTH, 0x100
    );
    sysbus_init_mmio(dev, &sio->io_i2c);
    memory_region_add_subregion(sysbus, 0x3f205000, &sio->io_i2c);

    memory_region_init_io(
        &sio->io_aux, obj, &synth_io_ops_aux, sio, TYPE_SYNTH, 0x8
    );
    sysbus_init_mmio(dev, &sio->io_aux);
    memory_region_add_subregion(sysbus, 0x3f215000, &sio->io_aux);

    memory_region_init_io(
        &sio->io_sdhci, obj, &synth_io_ops_sdhci, sio, TYPE_SYNTH, 0x100
    );
    sysbus_init_mmio(dev, &sio->io_sdhci);
    memory_region_add_subregion(sysbus, 0x3f300000, &sio->io_sdhci);

    memory_region_init_io(
        &sio->io_dma_chan15, obj, &synth_io_ops_dma_chan15, sio, TYPE_SYNTH, 0x100
    );
    sysbus_init_mmio(dev, &sio->io_dma_chan15);
    memory_region_add_subregion(sysbus, 0x3fe05000, &sio->io_dma_chan15);

    memory_region_init_io(
        &sio->io_soc_control, obj, &synth_io_ops_soc_control, sio, TYPE_SYNTH, 0x100
    );
    sysbus_init_mmio(dev, &sio->io_soc_control);
    memory_region_add_subregion(sysbus, 0x40000000, &sio->io_soc_control);
  qdev_init_gpio_in_named(DEVICE(dev), ic_irq_0, "arm-irq", 8);
 sysbus_init_irq(SYS_BUS_DEVICE(dev), &sio->ic_irq_1);
  qdev_init_gpio_in_named(DEVICE(dev), soc_control_irq_0, "gpu-irq", 1);
  qdev_init_gpio_in_named(DEVICE(dev), soc_control_irq_1, "cntvirq", 1);
 qdev_init_gpio_out_named(DEVICE(dev), &sio->soc_control_irq_2, "irq", 1);

}


static void synth_reset(DeviceState *d)
{
    SynthState *sio = SYNTH(d);

    sio->global_idx = 0;

    uint64_t trace_mbox_0x3f00ba20[] = {1, 0, 0x10000000};
    for (int i = 0; i < 3; i++) {
        sio->io_read_trace_mbox_0x3f00ba20[i] = trace_mbox_0x3f00ba20[i];
    }

    uint64_t trace_gpio_0x3f200040[] = {1, 0, 0x0};
    for (int i = 0; i < 3; i++) {
        sio->io_read_trace_gpio_0x3f200040[i] = trace_gpio_0x3f200040[i];
    }

    uint64_t trace_gpio_0x3f200044[] = {1, 0, 0xffffdf80};
    for (int i = 0; i < 3; i++) {
        sio->io_read_trace_gpio_0x3f200044[i] = trace_gpio_0x3f200044[i];
    }

    uint64_t trace_gpio_0x3f200010[] = {8, 0, 0x1000000, 0x20000000, 0x1000000, 0x0, 0x200000, 0x600000, 0x4000000, 0x20000000};
    for (int i = 0; i < 10; i++) {
        sio->io_read_trace_gpio_0x3f200010[i] = trace_gpio_0x3f200010[i];
    }

    uint64_t trace_gpio_0x3f200014[] = {12, 0, 0x4, 0x20, 0x100, 0x800, 0x0, 0x0, 0x0, 0x0, 0x4, 0x20, 0x100, 0x800};
    for (int i = 0; i < 14; i++) {
        sio->io_read_trace_gpio_0x3f200014[i] = trace_gpio_0x3f200014[i];
    }

    uint64_t trace_gpio_0x3f200038[] = {3, 0, 0x0, 0x0, 0x0};
    for (int i = 0; i < 5; i++) {
        sio->io_read_trace_gpio_0x3f200038[i] = trace_gpio_0x3f200038[i];
    }

    uint64_t trace_gpio_0x3f20000c[] = {3, 0, 0x8000, 0x8000, 0x8000};
    for (int i = 0; i < 5; i++) {
        sio->io_read_trace_gpio_0x3f20000c[i] = trace_gpio_0x3f20000c[i];
    }

    uint64_t trace_pl011_0x3f201030[] = {990, 0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0};
    for (int i = 0; i < 992; i++) {
        sio->io_read_trace_pl011_0x3f201030[i] = trace_pl011_0x3f201030[i];
    }

    uint64_t trace_pl011_0x3f201018[] = {104, 0, 0x20, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x20, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0};
    for (int i = 0; i < 106; i++) {
        sio->io_read_trace_pl011_0x3f201018[i] = trace_pl011_0x3f201018[i];
    }

    uint64_t trace_pl011_0x3f201038[] = {1, 0, 0x0};
    for (int i = 0; i < 3; i++) {
        sio->io_read_trace_pl011_0x3f201038[i] = trace_pl011_0x3f201038[i];
    }

    uint64_t trace_pl011_0x3f201000[] = {32, 0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0};
    for (int i = 0; i < 34; i++) {
        sio->io_read_trace_pl011_0x3f201000[i] = trace_pl011_0x3f201000[i];
    }

    uint64_t trace_mmc_0x3f202034[] = {4, 0, 0x0, 0x0, 0x0, 0x0};
    for (int i = 0; i < 6; i++) {
        sio->io_read_trace_mmc_0x3f202034[i] = trace_mmc_0x3f202034[i];
    }

    uint64_t trace_mmc_0x3f202000[] = {19, 0, 0x0, 0x0, 0x0, 0x8000, 0x8000, 0x0, 0x0, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x0};
    for (int i = 0; i < 21; i++) {
        sio->io_read_trace_mmc_0x3f202000[i] = trace_mmc_0x3f202000[i];
    }

    uint64_t trace_mmc_0x3f202020[] = {2, 0, 0x8, 0x8};
    for (int i = 0; i < 4; i++) {
        sio->io_read_trace_mmc_0x3f202020[i] = trace_mmc_0x3f202020[i];
    }

    uint64_t trace_mmc_0x3f202010[] = {2, 0, 0x200, 0x0};
    for (int i = 0; i < 4; i++) {
        sio->io_read_trace_mmc_0x3f202010[i] = trace_mmc_0x3f202010[i];
    }

    uint64_t trace_aux_0x3f215004[] = {6, 0, 0x4, 0x0, 0x2, 0x0, 0x1, 0x0};
    for (int i = 0; i < 8; i++) {
        sio->io_read_trace_aux_0x3f215004[i] = trace_aux_0x3f215004[i];
    }
}

static void synth_class_init(ObjectClass *klass, void *data)
{
        DeviceClass *dc = DEVICE_CLASS(klass);
        dc->realize = synth_realize;
        dc->reset = synth_reset;
        set_bit(DEVICE_CATEGORY_MISC, dc->categories);
}

static const TypeInfo synth_info =
{
        .name           = TYPE_SYNTH,
        .parent         = TYPE_SYS_BUS_DEVICE,
        .instance_size  = sizeof(SynthState),
        .instance_init  = synth_init,
        .class_init     = synth_class_init,
};
static void synth_register_types(void)
{
        type_register_static(&synth_info);
}

type_init(synth_register_types)
